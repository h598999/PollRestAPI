var ke=Object.defineProperty;var $e=(t,e,l)=>e in t?ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var x=(t,e,l)=>$e(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function l(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(o){if(o.ep)return;o.ep=!0;const c=l(o);fetch(o.href,c)}})();function z(){}function ye(t){return t()}function se(){return Object.create(null)}function I(t){t.forEach(ye)}function we(t){return typeof t=="function"}function K(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Pe(t){return Object.keys(t).length===0}function Ce(t){return t??""}function h(t,e){t.appendChild(e)}function w(t,e,l){t.insertBefore(e,l||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function le(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function g(t){return document.createElement(t)}function U(t){return document.createTextNode(t)}function v(){return U(" ")}function oe(){return U("")}function E(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function O(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Oe(t){return Array.from(t.childNodes)}function S(t,e){e=""+e,t.data!==e&&(t.data=e)}function J(t,e){t.value=e??""}function Ue(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let Q;function M(t){Q=t}function Ee(){if(!Q)throw new Error("Function called outside component initialization");return Q}function ze(){const t=Ee();return(e,l,{cancelable:n=!1}={})=>{const o=t.$$.callbacks[e];if(o){const c=Ue(e,l,{cancelable:n});return o.slice().forEach(r=>{r.call(t,c)}),!c.defaultPrevented}return!0}}const A=[],ue=[];let T=[];const fe=[],Ve=Promise.resolve();let te=!1;function Ne(){te||(te=!0,Ve.then(ve))}function ne(t){T.push(t)}const ee=new Set;let L=0;function ve(){if(L!==0)return;const t=Q;do{try{for(;L<A.length;){const e=A[L];L++,M(e),Se(e.$$)}}catch(e){throw A.length=0,L=0,e}for(M(null),A.length=0,L=0;ue.length;)ue.pop()();for(let e=0;e<T.length;e+=1){const l=T[e];ee.has(l)||(ee.add(l),l())}T.length=0}while(A.length);for(;fe.length;)fe.pop()();te=!1,ee.clear(),M(t)}function Se(t){if(t.fragment!==null){t.update(),I(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ne)}}function je(t){const e=[],l=[];T.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),T=e}const R=new Set;let j;function Ie(){j={r:0,c:[],p:j}}function qe(){j.r||I(j.c),j=j.p}function B(t,e){t&&t.i&&(R.delete(t),t.i(e))}function F(t,e,l,n){if(t&&t.o){if(R.has(t))return;R.add(t),j.c.push(()=>{R.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function D(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function re(t){t&&t.c()}function W(t,e,l){const{fragment:n,after_update:o}=t.$$;n&&n.m(e,l),ne(()=>{const c=t.$$.on_mount.map(ye).filter(we);t.$$.on_destroy?t.$$.on_destroy.push(...c):I(c),t.$$.on_mount=[]}),o.forEach(ne)}function Z(t,e){const l=t.$$;l.fragment!==null&&(je(l.after_update),I(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Le(t,e){t.$$.dirty[0]===-1&&(A.push(t),Ne(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function G(t,e,l,n,o,c,r=null,i=[-1]){const u=Q;M(t);const s=t.$$={fragment:null,ctx:[],props:c,update:z,not_equal:o,bound:se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:se(),dirty:i,skip_bound:!1,root:e.target||u.$$.root};r&&r(s.root);let m=!1;if(s.ctx=l?l(t,e.props||{},(p,a,...f)=>{const _=f.length?f[0]:a;return s.ctx&&o(s.ctx[p],s.ctx[p]=_)&&(!s.skip_bound&&s.bound[p]&&s.bound[p](_),m&&Le(t,p)),a}):[],s.update(),m=!0,I(s.before_update),s.fragment=n?n(s.ctx):!1,e.target){if(e.hydrate){const p=Oe(e.target);s.fragment&&s.fragment.l(p),p.forEach(b)}else s.fragment&&s.fragment.c();e.intro&&B(t.$$.fragment),W(t,e.target,e.anchor),ve()}M(u)}class X{constructor(){x(this,"$$");x(this,"$$set")}$destroy(){Z(this,1),this.$destroy=z}$on(e,l){if(!we(l))return z;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const o=n.indexOf(l);o!==-1&&n.splice(o,1)}}$set(e){this.$$set&&!Pe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ae="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ae);const H="http://localhost:8080/api/v1";async function Te(t){return await(await fetch(H+"/users/"+t)).json()}async function Be(){return await(await fetch(H+"/polls")).json()}async function De(t){return await(await fetch(H+"/polls/"+t)).json()}async function Me(t,e){const l=await fetch(H+"/votes/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!l.ok){const n=await l.json();throw new Error(`Error creating vote: ${n.message}`)}return l.json()}async function Qe(t,e){const l=await fetch(H+"/polls/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!l.ok){const n=await l.json();throw new Error(`Error creating poll: ${n.message}`)}return l.json()}function ae(t,e,l){const n=t.slice();return n[6]=e[l],n}function de(t){let e,l=D(t[0]),n=[];for(let o=0;o<l.length;o+=1)n[o]=pe(ae(t,l,o));return{c(){e=g("ul");for(let o=0;o<n.length;o+=1)n[o].c()},m(o,c){w(o,e,c);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(o,c){if(c&3){l=D(o[0]);let r;for(r=0;r<l.length;r+=1){const i=ae(o,l,r);n[r]?n[r].p(i,c):(n[r]=pe(i),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},d(o){o&&b(e),le(n,o)}}}function pe(t){let e,l=t[6].id+1+"",n,o,c=t[6].question+"",r,i,u,s,m;function p(){return t[3](t[6])}return{c(){e=g("li"),n=U(l),o=v(),r=U(c),i=v(),u=g("button"),u.textContent="Vote "},m(a,f){w(a,e,f),h(e,n),h(e,o),h(e,r),h(e,i),h(e,u),s||(m=E(u,"click",p),s=!0)},p(a,f){t=a,f&1&&l!==(l=t[6].id+1+"")&&S(n,l),f&1&&c!==(c=t[6].question+"")&&S(r,c)},d(a){a&&b(e),s=!1,m()}}}function Fe(t){let e,l,n,o,c,r=t[0].length>0&&de(t);return{c(){e=g("h1"),e.textContent="Welcome to the Poll app!",l=v(),n=g("br"),o=v(),c=g("h4"),r&&r.c()},m(i,u){w(i,e,u),w(i,l,u),w(i,n,u),w(i,o,u),w(i,c,u),r&&r.m(c,null)},p(i,[u]){i[0].length>0?r?r.p(i,u):(r=de(i),r.c(),r.m(c,null)):r&&(r.d(1),r=null)},i:z,o:z,d(i){i&&(b(e),b(l),b(n),b(o),b(c)),r&&r.d()}}}function He(t,e,l){let{currentUser:n}=e;console.log(n);let o=[];const c=ze();async function r(){l(0,o=await Be()),console.log(o)}function i(s){c("selectPoll",s)}r();const u=s=>i(s.id);return t.$$set=s=>{"currentUser"in s&&l(2,n=s.currentUser)},[o,i,n,u]}class Je extends X{constructor(e){super(),G(this,e,He,Fe,K,{currentUser:2})}}function he(t,e,l){const n=t.slice();return n[9]=e[l],n}function Re(t){let e;return{c(){e=g("p"),e.textContent="Loading poll details..."},m(l,n){w(l,e,n)},p:z,d(l){l&&b(e)}}}function Ke(t){let e,l,n=t[1].question+"",o,c,r,i,u,s,m,p=D(t[1].voteOptions),a=[];for(let f=0;f<p.length;f+=1)a[f]=_e(he(t,p,f));return{c(){e=g("h2"),l=U("Q: "),o=U(n),c=v(),r=g("div"),i=g("table"),u=g("thead"),u.innerHTML='<tr><th class="svelte-ia1zzd">Options:</th> <th class="svelte-ia1zzd">Number of votes:</th></tr>',s=v(),m=g("tbody");for(let f=0;f<a.length;f+=1)a[f].c();O(i,"class","svelte-ia1zzd"),O(r,"class","container svelte-ia1zzd")},m(f,_){w(f,e,_),h(e,l),h(e,o),w(f,c,_),w(f,r,_),h(r,i),h(i,u),h(i,s),h(i,m);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(m,null)},p(f,_){if(_&2&&n!==(n=f[1].question+"")&&S(o,n),_&15){p=D(f[1].voteOptions);let d;for(d=0;d<p.length;d+=1){const $=he(f,p,d);a[d]?a[d].p($,_):(a[d]=_e($),a[d].c(),a[d].m(m,null))}for(;d<a.length;d+=1)a[d].d(1);a.length=p.length}},d(f){f&&(b(e),b(c),b(r)),le(a,f)}}}function We(t){let e,l,n=t[9].caption+"",o,c,r,i,u=t[9].numberOfVotes+"",s,m,p,a;function f(){return t[6](t[9])}return{c(){e=g("tr"),l=g("td"),o=U(n),c=g("button"),c.textContent="Vote",r=v(),i=g("td"),s=U(u),m=v(),O(l,"class","svelte-ia1zzd"),O(i,"class","svelte-ia1zzd")},m(_,d){w(_,e,d),h(e,l),h(l,o),h(l,c),h(e,r),h(e,i),h(i,s),h(e,m),p||(a=E(c,"click",f),p=!0)},p(_,d){t=_,d&2&&n!==(n=t[9].caption+"")&&S(o,n),d&2&&u!==(u=t[9].numberOfVotes+"")&&S(s,u)},d(_){_&&b(e),p=!1,a()}}}function Ze(t){let e,l,n=t[9].caption+"",o,c,r,i,u=t[9].numberOfVotes+"",s,m,p,a;function f(){return t[5](t[9])}return{c(){e=g("tr"),l=g("td"),o=U(n),c=g("button"),c.textContent="Vote",r=v(),i=g("td"),s=U(u),m=v(),O(l,"class","svelte-ia1zzd"),O(i,"class","svelte-ia1zzd"),O(e,"class",Ce("voted-option")+" svelte-ia1zzd")},m(_,d){w(_,e,d),h(e,l),h(l,o),h(l,c),h(e,r),h(e,i),h(i,s),h(e,m),p||(a=E(c,"click",f),p=!0)},p(_,d){t=_,d&2&&n!==(n=t[9].caption+"")&&S(o,n),d&2&&u!==(u=t[9].numberOfVotes+"")&&S(s,u)},d(_){_&&b(e),p=!1,a()}}}function _e(t){let e,l;function n(r,i){return i&6&&(e=null),e==null&&(e=!!r[2].includes(r[9].id)),e?Ze:We}let o=n(t,-1),c=o(t);return{c(){c.c(),l=oe()},m(r,i){c.m(r,i),w(r,l,i)},p(r,i){o===(o=n(r,i))&&c?c.p(r,i):(c.d(1),c=o(r),c&&(c.c(),c.m(l.parentNode,l)))},d(r){r&&b(l),c.d(r)}}}function Ge(t){let e;function l(c,r){return c[1]?Ke:Re}let n=l(t),o=n(t);return{c(){o.c(),e=oe()},m(c,r){o.m(c,r),w(c,e,r)},p(c,[r]){n===(n=l(c))&&o?o.p(c,r):(o.d(1),o=n(c),o&&(o.c(),o.m(e.parentNode,e)))},i:z,o:z,d(c){c&&b(e),o.d(c)}}}function Xe(t,e,l){let{pollId:n}=e,{currentUser:o}=e,c=null,r=[];async function i(){l(1,c=await De(n))}async function u(a,f){try{const d=await Me(a,{selected:f});console.log("Vote created successfully:",d),s()}catch(_){console.error("Error creating vote:",_)}}function s(){try{let a=o.votes;a.length!==0?(l(2,r=[]),a.forEach(f=>{r.push(f.selected.id)})):console.log("There are no votes!")}catch(a){console.log(a)}}s();const m=a=>u(o.id,a),p=a=>u(o.id,a);return t.$$set=a=>{"pollId"in a&&l(4,n=a.pollId),"currentUser"in a&&l(0,o=a.currentUser)},i(),[o,c,r,u,n,m,p]}class Ye extends X{constructor(e){super(),G(this,e,Xe,Ge,K,{pollId:4,currentUser:0})}}function me(t,e,l){const n=t.slice();return n[11]=e[l],n[13]=l,n}function ge(t){let e;return{c(){e=g("p"),e.textContent="No options added yet."},m(l,n){w(l,e,n)},d(l){l&&b(e)}}}function be(t){let e,l=t[11].caption+"",n,o,c,r,i,u;function s(){return t[8](t[13])}return{c(){e=g("li"),n=U(l),o=v(),c=g("button"),c.textContent="Remove",r=v()},m(m,p){w(m,e,p),h(e,n),h(e,o),h(e,c),h(e,r),i||(u=E(c,"click",s),i=!0)},p(m,p){t=m,p&2&&l!==(l=t[11].caption+"")&&S(n,l)},d(m){m&&b(e),i=!1,u()}}}function xe(t){let e,l,n,o,c,r,i,u,s,m,p,a,f,_,d,$,V,Y,ce,C=t[1].length===0&&ge(),q=D(t[1]),P=[];for(let y=0;y<q.length;y+=1)P[y]=be(me(t,q,y));return{c(){e=g("h1"),e.textContent="Create a new Poll!",l=v(),n=g("div"),o=g("label"),o.textContent="Poll Question:",c=v(),r=g("input"),i=v(),u=g("h3"),u.textContent="Vote Options:",s=v(),C&&C.c(),m=v(),p=g("ul");for(let y=0;y<P.length;y+=1)P[y].c();a=v(),f=g("input"),_=v(),d=g("button"),d.textContent="Add Option",$=v(),V=g("button"),V.textContent="Create Poll",O(o,"for","question"),O(r,"type","text"),O(r,"id","question"),O(r,"placeholder","Enter your poll question"),O(f,"type","text"),O(f,"placeholder","Add a vote option")},m(y,N){w(y,e,N),w(y,l,N),w(y,n,N),h(n,o),h(n,c),h(n,r),J(r,t[0]),h(n,i),h(n,u),h(n,s),C&&C.m(n,null),h(n,m),h(n,p);for(let k=0;k<P.length;k+=1)P[k]&&P[k].m(p,null);h(n,a),h(n,f),J(f,t[2]),h(n,_),h(n,d),h(n,$),h(n,V),Y||(ce=[E(r,"input",t[7]),E(f,"input",t[9]),E(d,"click",t[3]),E(V,"click",t[10])],Y=!0)},p(y,[N]){if(N&1&&r.value!==y[0]&&J(r,y[0]),y[1].length===0?C||(C=ge(),C.c(),C.m(n,m)):C&&(C.d(1),C=null),N&18){q=D(y[1]);let k;for(k=0;k<q.length;k+=1){const ie=me(y,q,k);P[k]?P[k].p(ie,N):(P[k]=be(ie),P[k].c(),P[k].m(p,null))}for(;k<P.length;k+=1)P[k].d(1);P.length=q.length}N&4&&f.value!==y[2]&&J(f,y[2])},i:z,o:z,d(y){y&&(b(e),b(l),b(n)),C&&C.d(),le(P,y),Y=!1,I(ce)}}}function et(t,e,l){let{currentUser:n}=e,o="",c=[],r="";function i(){if(r.trim()!==""){let _={caption:r,validUntil:"2024-12-31T23:59:59Z"};l(1,c=[...c,_]),l(2,r="")}}function u(_){l(1,c=c.filter((d,$)=>$!==_))}async function s(){if(o.trim()!==""&&c.length>=2){let _={question:o,voteOptions:c};await Qe(n.id,_),l(0,o=""),l(1,c=[])}else console.log("Please enter a poll question and at least one vote option")}function m(){o=this.value,l(0,o)}const p=_=>u(_);function a(){r=this.value,l(2,r)}const f=()=>s();return t.$$set=_=>{"currentUser"in _&&l(6,n=_.currentUser)},[o,c,r,i,u,s,n,m,p,a,f]}class tt extends X{constructor(e){super(),G(this,e,et,xe,K,{currentUser:6})}}function nt(t){let e,l;return e=new tt({props:{currentUser:t[0]}}),{c(){re(e.$$.fragment)},m(n,o){W(e,n,o),l=!0},p(n,o){const c={};o&1&&(c.currentUser=n[0]),e.$set(c)},i(n){l||(B(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function lt(t){let e,l;return e=new Ye({props:{pollId:t[2],currentUser:t[0]}}),{c(){re(e.$$.fragment)},m(n,o){W(e,n,o),l=!0},p(n,o){const c={};o&4&&(c.pollId=n[2]),o&1&&(c.currentUser=n[0]),e.$set(c)},i(n){l||(B(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function ot(t){let e,l;return e=new Je({props:{currentUser:t[0]}}),e.$on("selectPoll",t[6]),{c(){re(e.$$.fragment)},m(n,o){W(e,n,o),l=!0},p(n,o){const c={};o&1&&(c.currentUser=n[0]),e.$set(c)},i(n){l||(B(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function rt(t){let e,l,n,o,c,r,i,u,s,m,p;const a=[ot,lt,nt],f=[];function _(d,$){return d[1]==="pollSelector"?0:d[1]==="poll"?1:d[1]==="pollCreator"?2:-1}return~(r=_(t))&&(i=f[r]=a[r](t)),{c(){e=g("nav"),l=g("button"),l.textContent="Home",n=v(),o=g("button"),o.textContent="Create a new Poll",c=v(),i&&i.c(),u=oe()},m(d,$){w(d,e,$),h(e,l),h(e,n),h(e,o),w(d,c,$),~r&&f[r].m(d,$),w(d,u,$),s=!0,m||(p=[E(l,"click",t[3]),E(o,"click",t[4])],m=!0)},p(d,[$]){let V=r;r=_(d),r===V?~r&&f[r].p(d,$):(i&&(Ie(),F(f[V],1,1,()=>{f[V]=null}),qe()),~r?(i=f[r],i?i.p(d,$):(i=f[r]=a[r](d),i.c()),B(i,1),i.m(u.parentNode,u)):i=null)},i(d){s||(B(i),s=!0)},o(d){F(i),s=!1},d(d){d&&(b(e),b(c),b(u)),~r&&f[r].d(d),m=!1,I(p)}}}function ct(t,e,l){let{currentUser:n}=e,o="pollSelector",c=null;function r(){l(1,o="pollSelector"),l(2,c=null)}function i(){l(1,o="pollCreator"),l(2,c=null)}async function u(){l(0,n=await Te(0)),console.log(n)}function s(p){l(2,c=p),l(1,o="poll")}u();const m=p=>s(p.detail);return t.$$set=p=>{"currentUser"in p&&l(0,n=p.currentUser)},[n,o,c,r,i,s,m]}class it extends X{constructor(e){super(),G(this,e,ct,rt,K,{currentUser:0})}}new it({target:document.getElementById("app")});
